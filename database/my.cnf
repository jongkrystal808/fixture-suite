cd /path/to/FIXTURE-M# my.cnf
# MySQL 8.0 自訂配置 - 用於 Docker 容器

[mysqld]
# ============================================
# 基本設定
# ============================================
# 預設字元集
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

# 預設存儲引擎
default-storage-engine = INNODB

# ============================================
# 連接設定
# ============================================
# 最大連接數
max_connections = 200

# 最大允許的封包大小
max_allowed_packet = 64M

# 連接超時時間
wait_timeout = 600
interactive_timeout = 600

# ============================================
# InnoDB 設定
# ============================================
# InnoDB 緩衝池大小(建議設置為可用記憶體的 50-70%)
innodb_buffer_pool_size = 256M

# InnoDB 日誌檔案大小
innodb_log_file_size = 64M

# InnoDB 日誌緩衝區大小
innodb_log_buffer_size = 8M

# InnoDB 刷新日誌頻率
innodb_flush_log_at_trx_commit = 2

# InnoDB 檔案格式
innodb_file_format = Barracuda

# InnoDB 嚴格模式
innodb_strict_mode = 1

# ============================================
# 查詢快取(MySQL 8.0 已移除,保留註解供參考)
# ============================================
# query_cache_type = 0
# query_cache_size = 0

# ============================================
# 二進位日誌設定(用於複製和備份)
# ============================================
# 啟用二進位日誌
# log-bin = mysql-bin
# binlog_format = ROW
# expire_logs_days = 7

# ============================================
# 慢查詢日誌
# ============================================
# 啟用慢查詢日誌
slow_query_log = 1
slow_query_log_file = /var/log/mysql/mysql-slow.log
long_query_time = 2

# 記錄未使用索引的查詢
log_queries_not_using_indexes = 0

# ============================================
# 錯誤日誌
# ============================================
log_error = /var/log/mysql/error.log

# ============================================
# 一般查詢日誌(除錯用,生產環境應關閉)
# ============================================
# general_log = 1
# general_log_file = /var/log/mysql/mysql.log

# ============================================
# 效能設定
# ============================================
# 臨時表大小
tmp_table_size = 32M
max_heap_table_size = 32M

# 排序緩衝區
sort_buffer_size = 2M

# 讀取緩衝區
read_buffer_size = 1M
read_rnd_buffer_size = 2M

# 連接緩衝區
join_buffer_size = 2M

# ============================================
# 安全設定
# ============================================
# 預設認證插件
default_authentication_plugin = mysql_native_password

# 禁用本機檔案載入
local_infile = 0

# SQL 模式
sql_mode = STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION

# ============================================
# 時區設定
# ============================================
# 設定時區為 UTC+8 (台北時間)
default-time-zone = '+08:00'

[mysql]
# MySQL 客戶端預設字元集
default-character-set = utf8mb4

[client]
# MySQL 客戶端預設字元集
default-character-set = utf8mb4
